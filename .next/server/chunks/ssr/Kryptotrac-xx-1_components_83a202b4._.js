module.exports=[88036,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(77803);let e=(0,d.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),f=(0,d.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),g=(0,d.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var h=a.i(79590),i=a.i(81550),j=a.i(25675);function k({totalValue:a,totalProfitLoss:d,profitLossPercentage:k,topHoldings:l,isPro:m}){let[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),r=async()=>{q(!0);try{let b=await fetch("/api/share/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalValue:a,totalProfitLoss:d,profitLossPercentage:k,topHoldings:l.slice(0,3),isPro:m})}),{imageUrl:c}=await b.json();await navigator.clipboard.writeText(`Check out my crypto portfolio on KryptoTrac! ðŸ“ˆ #KryptoTrac

${c}`),o(!0),setTimeout(()=>o(!1),3e3)}catch(a){console.error("[v0] Failed to generate share card:",a)}finally{q(!1)}},s=async()=>{q(!0);try{let b=await fetch("/api/share/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalValue:a,totalProfitLoss:d,profitLossPercentage:k,topHoldings:l.slice(0,3),isPro:m})}),{imageUrl:c}=await b.json(),e=document.createElement("a");e.href=c,e.download="kryptotrac-portfolio.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(a){console.error("[v0] Failed to download share card:",a)}finally{q(!1)}};return(0,b.jsxs)(j.Dialog,{children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,b.jsx)(e,{className:"h-4 w-4"}),"Share Portfolio"]})}),(0,b.jsxs)(j.DialogContent,{className:"sm:max-w-md bg-black/95 border-red-500/20",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{className:"text-white",children:"Share Your Portfolio"}),(0,b.jsx)(j.DialogDescription,{className:"text-gray-400",children:"Generate a shareable card showcasing your portfolio performance"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-lg border border-red-500/20 bg-gradient-to-br from-red-950/20 to-black p-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMCwwLDAuMSkiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-20"}),(0,b.jsxs)("div",{className:"relative space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-3xl font-bold text-white",children:["$",a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,b.jsxs)("p",{className:`text-sm font-medium ${d>=0?"text-emerald-400":"text-red-400"}`,children:[d>=0?"+":"","$",Math.abs(d).toLocaleString("en-US",{minimumFractionDigits:2}),"(",d>=0?"+":"",k.toFixed(2),"%)"]})]}),m&&(0,b.jsx)("span",{className:"rounded-full bg-gradient-to-r from-red-500 to-orange-500 px-3 py-1 text-xs font-bold text-white",children:"PRO"})]}),(0,b.jsx)("div",{className:"space-y-2",children:l.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-400",children:a.symbol.toUpperCase()}),(0,b.jsxs)("span",{className:a.profitLoss>=0?"text-emerald-400":"text-red-400",children:[a.profitLoss>=0?"+":"","$",Math.abs(a.profitLoss).toLocaleString("en-US",{minimumFractionDigits:2})]})]},a.coinId))}),(0,b.jsx)("div",{className:"pt-4 border-t border-red-500/20",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["Powered by KryptoTrac ",m?"Pro":""]})})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{onClick:r,disabled:p,className:"flex-1 bg-red-600 hover:bg-red-700",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Check,{className:"mr-2 h-4 w-4"}),"Copied!"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),"Copy Link"]})}),(0,b.jsxs)(i.Button,{onClick:s,disabled:p,variant:"outline",className:"flex-1 bg-transparent",children:[(0,b.jsx)(f,{className:"mr-2 h-4 w-4"}),"Download"]})]})]})]})]})}a.s(["PortfolioShareCard",()=>k],88036)},32766,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(66670),e=a.i(81419),f=a.i(43354);let g=(0,a.i(77803).default)("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var h=a.i(30389),i=a.i(61005),j=a.i(81550),k=a.i(25675),l=a.i(40807);function m({rows:a=5}){return(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:a}).map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-white/5 animate-pulse"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("div",{className:"h-4 w-1/3 bg-white/5 animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 w-1/4 bg-white/5 animate-pulse rounded"})]}),(0,b.jsx)("div",{className:"h-6 w-24 bg-white/5 animate-pulse rounded"})]},c))})}var n=a.i(34786);function o(){let[a,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),B=(0,d.createBrowserClient)();async function C(){let{data:a}=await B.auth.getUser();y(a.user)}async function D(){let{data:a}=await B.from("user_watchlists").select("coin_id").eq("user_id",x.id);a&&o(a.map(a=>a.coin_id))}async function E(){try{let b=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${a.join(",")}&sparkline=true`),c=await b.json();q(c)}catch(a){console.error("Failed to load coins:",a)}finally{w(!1)}}async function F(a){if(!a)return void u([]);try{let b=await fetch(`https://api.coingecko.com/api/v3/search?query=${a}`),c=await b.json();u(c.coins.slice(0,5))}catch(a){console.error("Search failed:",a)}}async function G(b){if(a.includes(b))return;n.haptics.success();let c=[...a,b];if(o(c),x){let{error:c}=await B.from("user_watchlists").upsert({user_id:x.id,coin_id:b},{onConflict:"user_id,coin_id",ignoreDuplicates:!0});c&&(console.error("[v0] Error adding to watchlist:",c),n.haptics.error(),o(a))}else localStorage.setItem("watchlist",JSON.stringify(c));A(!1),s(""),u([])}async function H(b){n.haptics.light();let c=a.filter(a=>a!==b);o(c),x?await B.from("user_watchlists").delete().eq("user_id",x.id).eq("coin_id",b):localStorage.setItem("watchlist",JSON.stringify(c))}return(0,c.useEffect)(()=>{C()},[]),(0,c.useEffect)(()=>{let a;x?D():(a=localStorage.getItem("watchlist"))?o(JSON.parse(a)):o(["bitcoin","ethereum","solana"])},[x]),(0,c.useEffect)(()=>{if(a.length>0){E();let a=setInterval(E,3e4);return()=>clearInterval(a)}w(!1)},[a]),v?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(f.Star,{className:"w-6 h-6 text-red-500"}),"My Watchlist"]})}),(0,b.jsx)(m,{rows:4})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(f.Star,{className:"w-6 h-6 text-red-500"}),"My Watchlist"]}),(0,b.jsxs)(k.Dialog,{open:z,onOpenChange:A,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"Add Coin"]})}),(0,b.jsxs)(k.DialogContent,{className:"bg-black/95 border-red-900/30 backdrop-blur-xl",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{className:"text-white",children:"Add to Watchlist"})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(l.Input,{placeholder:"Search cryptocurrencies...",value:r,onChange:a=>{s(a.target.value),F(a.target.value)},className:"bg-white/5 border-white/10 text-white"}),(0,b.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(c=>(0,b.jsxs)("button",{onClick:()=>G(c.id),disabled:a.includes(c.id),className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,b.jsx)("img",{src:c.image||"/placeholder.svg",alt:c.name,className:"w-8 h-8"}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("div",{className:"text-white font-medium",children:c.name}),(0,b.jsx)("div",{className:"text-white/60 text-sm uppercase",children:c.symbol})]}),a.includes(c.id)&&(0,b.jsx)("span",{className:"text-green-500 text-sm",children:"Added"})]},c.id))})]})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(a=>(0,b.jsxs)("div",{className:"group relative p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:border-red-500/50 transition-all duration-300 hover:shadow-[0_0_30px_rgba(239,68,68,0.3)]",children:[(0,b.jsx)("button",{onClick:()=>H(a.id),className:"absolute top-2 right-2 p-1 rounded-lg bg-black/50 hover:bg-red-600/20 opacity-0 group-hover:opacity-100 transition-all",children:(0,b.jsx)(g,{className:"w-4 h-4 text-red-500"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("img",{src:a.image||"/placeholder.svg",alt:a.name,className:"w-10 h-10"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-bold",children:a.name}),(0,b.jsx)("div",{className:"text-white/60 text-sm uppercase",children:a.symbol})]})]}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white mb-2",children:["$",a.current_price.toLocaleString()]}),(0,b.jsxs)("div",{className:`flex items-center gap-1 text-sm font-medium ${a.price_change_percentage_24h>=0?"text-green-500":"text-red-500"}`,children:[a.price_change_percentage_24h>=0?(0,b.jsx)(h.TrendingUp,{className:"w-4 h-4"}):(0,b.jsx)(i.TrendingDown,{className:"w-4 h-4"}),Math.abs(a.price_change_percentage_24h).toFixed(2),"%"]}),a.sparkline_in_7d&&(0,b.jsx)("svg",{className:"w-full h-12 mt-3",viewBox:"0 0 164 48",preserveAspectRatio:"none",children:(0,b.jsx)("polyline",{points:a.sparkline_in_7d.price.map((b,c)=>{let d=c/(a.sparkline_in_7d.price.length-1)*164,e=Math.min(...a.sparkline_in_7d.price),f=Math.max(...a.sparkline_in_7d.price);return`${d},${48-(b-e)/(f-e)*48}`}).join(" "),fill:"none",stroke:a.price_change_percentage_24h>=0?"#10b981":"#ef4444",strokeWidth:"2",className:"transition-all duration-300"})})]},a.id))}),0===p.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-white/60",children:[(0,b.jsx)(f.Star,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No coins in your watchlist yet."}),(0,b.jsx)("p",{className:"text-sm mt-2",children:'Click "Add Coin" to get started!'})]})]})}a.s(["WatchlistSection",()=>o],32766)},15274,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(66670),e=a.i(81419),f=a.i(4299),g=a.i(30389),h=a.i(61005),i=a.i(81550),j=a.i(25675),k=a.i(40807),l=a.i(21597);function m(){let[a,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),F=(0,d.createBrowserClient)();async function G(){let{data:a}=await F.auth.getUser();E(a.user)}async function H(){let{data:a}=await F.from("user_portfolios").select("*").eq("user_id",D.id);a&&m(await Promise.all(a.map(async a=>{try{let b=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${a.coin_id}&vs_currencies=usd`),c=await b.json();return{...a,current_price:c[a.coin_id]?.usd||0}}catch(b){return{...a,current_price:0}}}))),o(!1)}async function I(a){if(!a)return void u([]);try{let b=await fetch(`https://api.coingecko.com/api/v3/search?query=${a}`),c=await b.json();u(c.coins.slice(0,5))}catch(a){console.error("Search failed:",a)}}async function J(){if(!v||!x||!z)return;let{error:a}=await F.from("user_portfolios").insert({user_id:D.id,coin_id:v.id,coin_name:v.name,coin_symbol:v.symbol,coin_image:v.large,quantity:parseFloat(x),purchase_price:parseFloat(z),purchase_date:B||new Date().toISOString()});a||(H(),q(!1),w(null),y(""),A(""),C(""),s(""),u([]))}async function K(a){await F.from("user_portfolios").delete().eq("id",a),H()}(0,c.useEffect)(()=>{G()},[]),(0,c.useEffect)(()=>{if(D){H();let a=setInterval(H,3e4);return()=>clearInterval(a)}},[D]);let L=a.reduce((a,b)=>a+(b.current_price||0)*b.quantity,0),M=a.reduce((a,b)=>a+b.purchase_price*b.quantity,0),N=L-M,O=M>0?N/M*100:0;return D?n?(0,b.jsx)("div",{className:"text-white/60",children:"Loading portfolio..."}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Portfolio"}),(0,b.jsxs)(j.Dialog,{open:p,onOpenChange:q,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"Add Holding"]})}),(0,b.jsxs)(j.DialogContent,{className:"bg-black/95 border-red-900/30 backdrop-blur-xl",children:[(0,b.jsx)(j.DialogHeader,{children:(0,b.jsx)(j.DialogTitle,{className:"text-white",children:"Add Holding"})}),(0,b.jsx)("div",{className:"space-y-4",children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[(0,b.jsx)("img",{src:v.large||"/placeholder.svg",alt:v.name,className:"w-10 h-10"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-medium",children:v.name}),(0,b.jsx)("div",{className:"text-white/60 text-sm",children:v.symbol.toUpperCase()})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"quantity",className:"text-white",children:"Quantity"}),(0,b.jsx)(k.Input,{id:"quantity",type:"number",step:"any",placeholder:"0.0",value:x,onChange:a=>y(a.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"price",className:"text-white",children:"Purchase Price (USD)"}),(0,b.jsx)(k.Input,{id:"price",type:"number",step:"any",placeholder:"0.0",value:z,onChange:a=>A(a.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"date",className:"text-white",children:"Purchase Date (Optional)"}),(0,b.jsx)(k.Input,{id:"date",type:"date",value:B,onChange:a=>C(a.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{onClick:()=>w(null),variant:"outline",className:"flex-1",children:"Back"}),(0,b.jsx)(i.Button,{onClick:J,className:"flex-1 bg-red-600 hover:bg-red-700",children:"Add Holding"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Input,{placeholder:"Search cryptocurrencies...",value:r,onChange:a=>{s(a.target.value),I(a.target.value)},className:"bg-white/5 border-white/10 text-white"}),(0,b.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(a=>(0,b.jsxs)("button",{onClick:()=>w(a),className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center gap-3 transition-all",children:[(0,b.jsx)("img",{src:a.large||"/placeholder.svg",alt:a.name,className:"w-8 h-8"}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("div",{className:"text-white font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-white/60 text-sm uppercase",children:a.symbol})]})]},a.id))})]})})]})]})]}),a.length>0&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,b.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Value"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white",children:["$",L.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,b.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Cost"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white",children:["$",M.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,b.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Gain/Loss"}),(0,b.jsxs)("div",{className:`text-2xl font-bold ${N>=0?"text-green-500":"text-red-500"}`,children:[N>=0?"+":"","$",N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),(0,b.jsxs)("span",{className:"text-base ml-2",children:["(",O>=0?"+":"",O.toFixed(2),"%)"]})]})]})]}),(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>{let c=(a.current_price||0)*a.quantity,d=a.purchase_price*a.quantity,e=c-d,i=d>0?e/d*100:0;return(0,b.jsx)("div",{className:"group p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:border-red-500/50 transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("img",{src:a.coin_image||"/placeholder.svg",alt:a.coin_name,className:"w-10 h-10"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-bold",children:a.coin_name}),(0,b.jsxs)("div",{className:"text-white/60 text-sm",children:[a.quantity," ",a.coin_symbol.toUpperCase()," @ $",a.purchase_price.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-white font-bold text-lg",children:["$",c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,b.jsxs)("div",{className:`text-sm font-medium flex items-center gap-1 ${e>=0?"text-green-500":"text-red-500"}`,children:[e>=0?(0,b.jsx)(g.TrendingUp,{className:"w-4 h-4"}):(0,b.jsx)(h.TrendingDown,{className:"w-4 h-4"}),e>=0?"+":"","$",Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," (",i>=0?"+":"",i.toFixed(2),"%)"]})]})]}),(0,b.jsx)("button",{onClick:()=>K(a.id),className:"ml-4 p-2 rounded-lg bg-black/50 hover:bg-red-600/20 opacity-0 group-hover:opacity-100 transition-all",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4 text-red-500"})})]})},a.id)})}),0===a.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-white/60",children:[(0,b.jsx)("p",{children:"No holdings in your portfolio yet."}),(0,b.jsx)("p",{className:"text-sm mt-2",children:'Click "Add Holding" to track your investments!'})]})]}):null}a.s(["PortfolioSection",()=>m])},60191,a=>{"use strict";var b=a.i(59295),c=a.i(77803);let d=(0,c.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var e=a.i(30389),f=a.i(82317);let g=(0,c.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var h=a.i(81550),i=a.i(58294);function j({user:a}){let c=[{icon:g,title:"Build Your Watchlist",description:"Add cryptocurrencies you want to track",action:"Browse Coins",href:"/"},{icon:e.TrendingUp,title:"Track Your Portfolio",description:"Record your holdings and see real-time performance",action:"Add Holdings",href:"/dashboard"},{icon:f.Bell,title:"Set Price Alerts",description:"Get notified when prices hit your targets",action:"Create Alert",href:"/alerts"}];return(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:(0,b.jsx)(d,{className:"h-8 w-8 text-primary"})}),(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Welcome to KryptoTrac!"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground",children:"Let's get you set up in 3 simple steps"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:c.map((a,c)=>(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-200",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-4",children:(0,b.jsx)(a.icon,{className:"h-6 w-6 text-primary"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:a.description}),(0,b.jsx)(h.Button,{asChild:!0,className:"w-full",children:(0,b.jsx)(i.default,{href:a.href,children:a.action})})]},c))}),(0,b.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-6 text-center",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Need help getting started?"," ",(0,b.jsx)(i.default,{href:"/docs",className:"text-primary hover:underline",children:"Check out our guide"})]})})]})})}a.s(["EmptyDashboard",()=>j],60191)},52447,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(66670);let e=(0,a.i(77803).default)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var f=a.i(59841);function g(){let[a,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{!async function(){let a=(0,d.createBrowserClient)(),{data:{user:b}}=await a.auth.getUser();if(!b)return i(!1);let{data:c}=await a.from("profiles").select("streak_count, last_active_date").eq("user_id",b.id).single();if(c){let d=new Date().toISOString().split("T")[0],e=c.last_active_date;if(e===d)g(c.streak_count||0);else{let f=new Date;if(f.setDate(f.getDate()-1),e===f.toISOString().split("T")[0]){let e=(c.streak_count||0)+1;g(e),await a.from("profiles").update({streak_count:e,last_active_date:d}).eq("user_id",b.id)}else g(1),await a.from("profiles").update({streak_count:1,last_active_date:d}).eq("user_id",b.id)}}i(!1)}()},[]),h||0===a)?null:(0,b.jsxs)(f.Card,{className:"border-orange-500/20 bg-gradient-to-br from-orange-950/20 to-black p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-orange-500 to-red-500",children:(0,b.jsx)(e,{className:"h-6 w-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Daily Streak"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-white",children:[a," ",1===a?"day":"days"]})]})]}),a>=7&&(0,b.jsx)("div",{className:"mt-3 rounded-md bg-orange-500/10 border border-orange-500/20 px-3 py-2 text-xs text-orange-300",children:"ðŸ”¥ On fire! Keep it up to unlock rewards"})]})}a.s(["StreakTracker",()=>g],52447)},93057,a=>{"use strict";var b=a.i(59295);let c=(0,a.i(77803).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=a.i(59841),e=a.i(81550);function f(){return(0,b.jsx)(d.Card,{className:"border-border/40 bg-background/50 p-6 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Recommended Exchanges"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trusted platforms to buy and trade crypto"})]}),(0,b.jsx)("div",{className:"space-y-3",children:[{name:"Kraken",description:"Top-rated Canadian exchange with low fees",badge:"Popular",logo:"https://cryptologos.cc/logos/kraken-kraken-logo.png",link:"#"},{name:"Coinbase",description:"Get $10 in Bitcoin on your first $100 trade",badge:"New User Bonus",logo:"https://cryptologos.cc/logos/coinbase-coin-logo.png",link:"#"},{name:"Binance",description:"World's largest crypto exchange",badge:"Global",logo:"https://cryptologos.cc/logos/binance-coin-bnb-logo.png",link:"#"}].map(a=>(0,b.jsxs)("div",{className:"group flex items-center justify-between rounded-lg border border-border/40 bg-background/50 p-4 transition-all hover:border-primary/50 hover:bg-background/80",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("img",{src:a.logo||"/placeholder.svg",alt:`${a.name} logo`,className:"h-10 w-10 rounded-full object-contain"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:a.name}),(0,b.jsx)("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:a.badge})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})]}),(0,b.jsx)(e.Button,{asChild:!0,variant:"outline",size:"sm",className:"gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsxs)("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",children:["Visit",(0,b.jsx)(c,{className:"h-3.5 w-3.5"})]})})]},a.name))}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center pt-2 border-t border-border/40",children:"We may earn a commission from partner links. Always do your own research."})]})})}a.s(["RecommendedExchanges",()=>f],93057)},54288,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(54805),e=a.i(48035),f=a.i(4944),g=a.i(34786);let h=[{message:"Yo! I'm BB, your crypto buddy. ðŸ",haptic:[30,20,30],delay:0},{message:"I speak YOUR language - literally. Over 100 languages. Try me in any language you want.",haptic:[30,20,30],delay:2e3},{message:"I watch the markets 24/7 and sometimes I'll pop up with tips when I notice something important. ðŸ‘€",haptic:[50,30,100],delay:4e3},{message:"Ask me anything about crypto. I got you. ðŸ",haptic:[30,20,30],delay:6e3}];function i({onComplete:a}){let[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(i>=h.length)return void setTimeout(()=>{l(!1),setTimeout(a,500)},2e3);let b=h[i],c=setTimeout(()=>{(0,g.triggerHaptic)(...b.haptic),j(i+1)},b.delay+2e3*(0!==i));return()=>clearTimeout(c)},[i,a]),k)?(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,b.jsxs)(d.motion.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"relative w-full max-w-md glass-card p-8 space-y-6",children:[(0,b.jsx)("button",{onClick:()=>{l(!1),a()},className:"absolute top-4 right-4 text-white/40 hover:text-white transition-colors",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)(d.motion.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:2},className:"text-6xl mb-4",children:"ðŸ"})}),(0,b.jsx)(e.AnimatePresence,{mode:"wait",children:h.slice(0,i+1).map((a,c)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"text-center",children:(0,b.jsx)("p",{className:"text-white text-lg leading-relaxed",children:a.message})},c))}),i>=h.length&&(0,b.jsx)(d.motion.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>{l(!1),a()},className:"w-full py-3 bg-gradient-to-r from-orange-500 to-red-600 rounded-lg font-medium text-white shadow-lg hover:shadow-xl transition-all",children:"Let's Go!"})]})}):null}var j=a.i(66670);function k(){let a=async()=>{let a=(0,j.createBrowserClient)(),{data:{user:b}}=await a.auth.getUser();b&&await a.from("profiles").update({onboarding_completed:!0}).eq("id",b.id)};return(0,b.jsx)(i,{onComplete:a})}a.s(["BBWelcomeWrapper",()=>k],54288)},37794,a=>{"use strict";var b=a.i(59295),c=a.i(47937),d=a.i(61611),e=a.i(88422),f=a.i(75583),g=a.i(30389);let h=(0,a.i(77803).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var i=a.i(59841),j=a.i(83433),k=a.i(81550);function l({name:a,data:c}){let d,e;return(0,b.jsxs)(i.Card,{className:"bg-gray-800/50 border-gray-700/50",children:[(0,b.jsx)(i.CardHeader,{className:"pb-3",children:(0,b.jsxs)(i.CardTitle,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,b.jsx)(g.TrendingUp,{className:"w-4 h-4 text-red-500"}),a]})}),(0,b.jsxs)(i.CardContent,{className:"space-y-2",children:["Aave"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Collateral:"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(c.totalCollateralETH).toFixed(4)," ETH"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Debt:"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(c.totalDebtETH).toFixed(4)," ETH"]})]}),(d=parseFloat(c.healthFactor),(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Health Factor:"}),(0,b.jsx)("span",{className:`font-medium ${d>2?"text-green-500":d>1.5?"text-yellow-500":"text-red-500"}`,children:d.toFixed(2)})]}))]}),"Uniswap V3"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Active Positions:"}),(0,b.jsx)("span",{className:"text-white font-medium",children:c.totalPositions})]}),c.positions&&c.positions.length>0&&(0,b.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:c.positions.slice(0,2).map((a,c)=>(0,b.jsxs)("div",{className:"truncate",children:["Pool #",a.tokenId.slice(0,6),"..."]},c))})]}),"Compound"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Supplied:"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:["$",parseFloat(c.supplied).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Borrowed:"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:["$",parseFloat(c.borrowed).toFixed(2)]})]}),(e=parseFloat(c.netPosition),(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Net Position:"}),(0,b.jsxs)("span",{className:`font-medium ${e>=0?"text-green-500":"text-red-500"}`,children:["$",Math.abs(e).toFixed(2)]})]}))]}),"Lido"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Staked ETH:"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(c.stETH).toFixed(4)," stETH"]})]}),(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs mt-2",children:c.type})]}),"Curve"===a&&(0,b.jsx)("div",{className:"text-xs text-gray-400",children:c.note||"No active positions"})]})]})}function m(){let a=(0,d.useRouter)(),[j,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)("");(0,c.useEffect)(()=>{r()},[]);let r=async()=>{try{let a=await fetch("/api/defi/positions"),b=await a.json();b.error?q(b.error):m(b.positions||[])}catch(a){q("Failed to load DeFi positions")}finally{o(!1)}};return n?(0,b.jsx)(i.Card,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700/50",children:(0,b.jsx)(i.CardContent,{className:"flex items-center justify-center p-12",children:(0,b.jsx)(e.Loader2,{className:"w-8 h-8 animate-spin text-red-500"})})}):p?(0,b.jsx)(i.Card,{className:"bg-red-900/20 border-red-500/30",children:(0,b.jsx)(i.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(h,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-red-400 font-medium mb-1",children:"Error Loading Positions"}),(0,b.jsx)("p",{className:"text-red-400/80 text-sm",children:p})]})]})})}):(0,b.jsxs)(i.Card,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700/50",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-red-600/20 rounded-xl flex items-center justify-center",children:(0,b.jsx)(g.TrendingUp,{className:"w-6 h-6 text-red-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.CardTitle,{className:"text-xl font-bold text-white",children:"DeFi Positions"}),(0,b.jsxs)("p",{className:"text-sm text-gray-400 mt-0.5",children:["Tracked across ",j?.length||0," wallet",j?.length!==1?"s":""]})]})]}),(0,b.jsx)(k.Button,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>a.push("/settings/wallets"),children:"Add Wallet"})]})}),(0,b.jsx)(i.CardContent,{className:"space-y-6",children:0===j.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Wallet,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No Wallets Configured"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Add an Ethereum wallet address to start tracking your DeFi positions"}),(0,b.jsx)(k.Button,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>a.push("/settings/wallets"),children:"Add Your First Wallet"})]}):j.map((a,c)=>{let d,e,g,h,i;return(0,b.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-5 border border-gray-700/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-5 pb-3 border-b border-gray-700/50",children:[(0,b.jsx)(f.Wallet,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-400",children:a.label||`Wallet ${c+1}`}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 font-mono",children:[a.wallet.slice(0,6),"...",a.wallet.slice(-4)]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.protocols.aave&&null!=a.protocols.aave.totalCollateralETH&&parseFloat(a.protocols.aave.totalCollateralETH)>0&&(0,b.jsx)(l,{name:"Aave",data:a.protocols.aave}),a.protocols.uniswap&&null!=a.protocols.uniswap.totalPositions&&a.protocols.uniswap.totalPositions>0&&(0,b.jsx)(l,{name:"Uniswap V3",data:a.protocols.uniswap}),a.protocols.compound&&null!=a.protocols.compound.supplied&&parseFloat(a.protocols.compound.supplied)>0&&(0,b.jsx)(l,{name:"Compound",data:a.protocols.compound}),a.protocols.lido&&null!=a.protocols.lido.stETH&&parseFloat(a.protocols.lido.stETH)>0&&(0,b.jsx)(l,{name:"Lido",data:a.protocols.lido}),a.protocols.curve&&a.protocols.curve.positions&&a.protocols.curve.positions.length>0&&(0,b.jsx)(l,{name:"Curve",data:a.protocols.curve})]}),(d=a.protocols.aave?.totalCollateralETH!=null&&parseFloat(a.protocols.aave.totalCollateralETH)>0,e=a.protocols.uniswap?.totalPositions!=null&&a.protocols.uniswap.totalPositions>0,g=a.protocols.compound?.supplied!=null&&parseFloat(a.protocols.compound.supplied)>0,h=a.protocols.lido?.stETH!=null&&parseFloat(a.protocols.lido.stETH)>0,i=a.protocols.curve?.positions&&a.protocols.curve.positions.length>0,d||e||g||h||i?null:(0,b.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No active DeFi positions found for this wallet"}))]},c)})})]})}a.s(["DeFiPositions",()=>m],37794)}];

//# sourceMappingURL=Kryptotrac-xx-1_components_83a202b4._.js.map