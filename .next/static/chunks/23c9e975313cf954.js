(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91716,e=>{"use strict";let t=(0,e.i(74227).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],91716)},50676,e=>{"use strict";let t=(0,e.i(74227).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],50676)},92781,e=>{"use strict";let t=(0,e.i(74227).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>t],92781)},88869,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(21587),r=e.i(42086),i=e.i(13628);let l=(0,r.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(l({variant:s}),e),...a})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}var c=e.i(91716),x=e.i(50676),o=e.i(74227);let m=(0,o.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),u=(0,o.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var h=e.i(92781);function p(){let[e,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),[o,p]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/admin/analytics");if(!e.ok)throw Error(`Failed to fetch: ${e.status}`);let t=await e.json();r(t)}catch(e){p(e instanceof Error?e.message:"Failed to load analytics")}finally{l(!1)}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),i)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):o?(0,t.jsx)(n,{variant:"destructive",children:(0,t.jsx)(d,{children:o})}):e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Subscribers"}),(0,t.jsx)("p",{className:"text-3xl font-bold mt-2",children:e.active_subscribers})]}),(0,t.jsx)(m,{className:"w-8 h-8 text-primary"})]})}),(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Monthly Recurring Revenue"}),(0,t.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["$",e.mrr.toFixed(2)]})]}),(0,t.jsx)(u,{className:"w-8 h-8 text-green-500"})]})}),(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Churn Rate"}),(0,t.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[e.churn_rate.toFixed(1),"%"]})]}),(0,t.jsx)(h.TrendingDown,{className:"w-8 h-8 text-red-500"})]})}),(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"ARPU"}),(0,t.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["$",e.active_subscribers>0?(e.mrr/e.active_subscribers).toFixed(2):"0.00"]})]}),(0,t.jsx)(x.TrendingUp,{className:"w-8 h-8 text-blue-500"})]})})]}),(0,t.jsxs)(a.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"MRR by Plan"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(e.mrr_by_plan).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e}),(0,t.jsxs)("span",{className:"text-lg font-bold",children:["$",s.toFixed(2)]})]},e))})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Last updated: ",new Date(e.timestamp).toLocaleString()]})]}):(0,t.jsx)(n,{children:(0,t.jsx)(d,{children:"No data available"})})}e.s(["SubscriptionAnalyticsDashboard",()=>p],88869)}]);