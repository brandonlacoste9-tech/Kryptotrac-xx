(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77878,e=>{"use strict";var t=e.i(91392),r=e.i(10145),s=e.i(42086),i=e.i(13628);let a=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,asChild:n=!1,...o}){let l=n?r.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(a({variant:s}),e),...o})}e.s(["Badge",()=>n])},13890,46866,14052,80218,54204,1781,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:s=!0}={}){return function(t){if(e?.(t),!1===s||!t.defaultPrevented)return r?.(t)}}"undefined"!=typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t],13890);var r=e.i(66884),s=e.i(91392);function i(e,t){let i=r.createContext(t),a=e=>{let{children:t,...a}=e,n=r.useMemo(()=>a,Object.values(a));return(0,s.jsx)(i.Provider,{value:n,children:t})};return a.displayName=e+"Provider",[a,function(s){let a=r.useContext(i);if(a)return a;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function a(e,t=[]){let i=[],n=()=>{let t=i.map(e=>r.createContext(e));return function(s){let i=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return n.scopeName=e,[function(t,a){let n=r.createContext(a),o=i.length;i=[...i,a];let l=t=>{let{scope:i,children:a,...l}=t,c=i?.[e]?.[o]||n,d=r.useMemo(()=>l,Object.values(l));return(0,s.jsx)(c.Provider,{value:d,children:a})};return l.displayName=t+"Provider",[l,function(s,i){let l=i?.[e]?.[o]||n,c=r.useContext(l);if(c)return c;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=s.reduce((t,{useScope:r,scopeName:s})=>{let i=r(e)[`__scope${s}`];return{...t,...i}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return s.scopeName=t.scopeName,s}(n,...t)]}e.s(["createContext",()=>i,"createContextScope",()=>a],46866);var n=globalThis?.document?r.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>n],14052),r[" useEffectEvent ".trim().toString()],r[" useInsertionEffect ".trim().toString()];var o=r[" useInsertionEffect ".trim().toString()]||n;function l({prop:e,defaultProp:t,onChange:s=()=>{},caller:i}){let[a,n,l]=function({defaultProp:e,onChange:t}){let[s,i]=r.useState(e),a=r.useRef(s),n=r.useRef(t);return o(()=>{n.current=t},[t]),r.useEffect(()=>{a.current!==s&&(n.current?.(s),a.current=s)},[s,a]),[s,i,n]}({defaultProp:t,onChange:s}),c=void 0!==e,d=c?e:a;{let t=r.useRef(void 0!==e);r.useEffect(()=>{let e=t.current;if(e!==c){let t=c?"controlled":"uncontrolled";console.warn(`${i} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,i])}return[d,r.useCallback(t=>{if(c){let r="function"==typeof t?t(e):t;r!==e&&l.current?.(r)}else n(t)},[c,e,n,l])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>l],80218);var c=e.i(95272),d=e.i(93526);function u(e){var t;let i,a=(t=e,(i=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var a;let e,n,o=(a=s,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),l=function(e,t){let r={...t};for(let s in t){let i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(r[s]=i):"style"===s?r[s]={...i,...a}:"className"===s&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}(i,s.props);return s.type!==r.Fragment&&(l.ref=t?(0,d.composeRefs)(t,o):o),r.cloneElement(s,l)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${t}.SlotClone`,i),n=r.forwardRef((e,t)=>{let{children:i,...n}=e,o=r.Children.toArray(i),l=o.find(h);if(l){let e=l.props.children,i=o.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,s.jsx)(a,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,s.jsx)(a,{...n,ref:t,children:i})});return n.displayName=`${e}.Slot`,n}var f=Symbol("radix.slottable");function h(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}e.s(["createSlot",()=>u],54204);var m=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let i=u(`Primitive.${t}`),a=r.forwardRef((e,r)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?i:t,{...n,ref:r})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function p(e,t){e&&c.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>m,"dispatchDiscreteCustomEvent",()=>p],1781)},11004,e=>{"use strict";var t=e.i(66884);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},36696,e=>{"use strict";var t=e.i(66884),r=e.i(14052);function s(e){let[s,i]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,s;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;i({width:r,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)},[e]),s}e.s(["useSize",()=>s])},77433,e=>{"use strict";var t=e.i(91392),r=e.i(66884),s=e.i(62282),i=e.i(13890),a=e.i(93526),n=e.i(46866),o=e.i(80218),l=e.i(11004),c=e.i(36696),d=e.i(1781),u="Switch",[f,h]=(0,n.createContextScope)(u),[m,p]=f(u),x=r.forwardRef((e,s)=>{let{__scopeSwitch:n,name:l,checked:c,defaultChecked:f,required:h,disabled:p,value:x="on",onCheckedChange:v,form:y,...w}=e,[j,N]=r.useState(null),k=(0,a.useComposedRefs)(s,e=>N(e)),C=r.useRef(!1),S=!j||y||!!j.closest("form"),[E,_]=(0,o.useControllableState)({prop:c,defaultProp:f??!1,onChange:v,caller:u});return(0,t.jsxs)(m,{scope:n,checked:E,disabled:p,children:[(0,t.jsx)(d.Primitive.button,{type:"button",role:"switch","aria-checked":E,"aria-required":h,"data-state":g(E),"data-disabled":p?"":void 0,disabled:p,value:x,...w,ref:k,onClick:(0,i.composeEventHandlers)(e.onClick,e=>{_(e=>!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,t.jsx)(b,{control:j,bubbles:!C.current,name:l,value:x,checked:E,required:h,disabled:p,form:y,style:{transform:"translateX(-100%)"}})]})});x.displayName=u;var v="SwitchThumb",y=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...i}=e,a=p(v,s);return(0,t.jsx)(d.Primitive.span,{"data-state":g(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:r})});y.displayName=v;var b=r.forwardRef(({__scopeSwitch:e,control:s,checked:i,bubbles:n=!0,...o},d)=>{let u=r.useRef(null),f=(0,a.useComposedRefs)(u,d),h=(0,l.usePrevious)(i),m=(0,c.useSize)(s);return r.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==i&&t){let r=new Event("click",{bubbles:n});t.call(e,i),e.dispatchEvent(r)}},[h,i,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...o,tabIndex:-1,ref:f,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function g(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";let w=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(x,{className:`peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 focus-visible:ring-offset-black disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-red-600 data-[state=checked]:to-red-500 data-[state=unchecked]:bg-white/20 ${e}`,...r,ref:s,children:(0,t.jsx)(y,{className:"pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})}));w.displayName=x.displayName;var j=e.i(74227);let N=(0,j.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),k=(0,j.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var C=e.i(21385);function S({userId:e,userEmail:i,isPro:a}){let[n,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)("weekly"),[f,h]=(0,r.useState)("America/New_York"),[m,p]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!0),g=(0,C.createBrowserClient)();async function j(){try{let{data:t,error:r}=await g.from("digest_preferences").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)return void console.error("[v0] Error loading preferences:",r);t?(c(t.digest_enabled),u("daily"===t.digest_frequency?"daily":"weekly"),h(t.timezone||"America/New_York")):await g.from("digest_preferences").insert({user_id:e,digest_enabled:!0,digest_frequency:"weekly",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}catch(e){console.error("[v0] Error loading preferences:",e)}finally{b(!1)}}async function S(t){c(t),await g.from("digest_preferences").upsert({user_id:e,digest_enabled:t,digest_frequency:d,timezone:f},{onConflict:"user_id"})}async function E(t){"daily"!==t||a?(u(t),await g.from("digest_preferences").upsert({user_id:e,digest_enabled:l,digest_frequency:t,timezone:f},{onConflict:"user_id"})):alert("Daily digests are only available for Pro users. Upgrade to enable!")}async function _(){v(!0);try{await fetch("/api/test-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})}),p(!0),setTimeout(()=>p(!1),3e3)}catch(e){console.error("Failed to send test email:",e)}finally{v(!1)}}return((0,r.useEffect)(()=>{j()},[]),y)?(0,t.jsx)("div",{className:"glass-card p-6",children:"Loading preferences..."}):(0,t.jsxs)("div",{className:"glass-card p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-white/60 text-sm",children:"Configure how you receive notifications"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Price Alerts"}),(0,t.jsx)("div",{className:"text-sm text-white/60",children:"Receive email when your price alerts are triggered"})]}),(0,t.jsx)(w,{checked:n,onCheckedChange:o})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Portfolio Digest"}),(0,t.jsx)("div",{className:"text-sm text-white/60",children:"AI-powered daily or weekly portfolio summary"})]}),(0,t.jsx)(w,{checked:l,onCheckedChange:S})]}),l&&(0,t.jsx)("div",{className:"pl-4 space-y-3 border-l-2 border-red-500/30",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",children:"Frequency"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s.Button,{variant:"weekly"===d?"default":"outline",size:"sm",onClick:()=>E("weekly"),className:"weekly"===d?"bg-red-600":"border-white/20",children:"Weekly (Free)"}),(0,t.jsxs)(s.Button,{variant:"daily"===d?"default":"outline",size:"sm",onClick:()=>E("daily"),className:"daily"===d?"bg-red-600":"border-white/20",disabled:!a,children:["Daily ",!a&&"â­ Pro"]})]}),!a&&(0,t.jsx)("p",{className:"text-xs text-white/50",children:"Daily digests require a Pro subscription"})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Product Updates"}),(0,t.jsx)("div",{className:"text-sm text-white/60",children:"News about KryptoTrac features and updates"})]}),(0,t.jsx)(w,{checked:!0,onCheckedChange:()=>{}})]})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-white/10 space-y-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-white text-sm",children:"Test Email Delivery"}),(0,t.jsxs)("div",{className:"text-xs text-white/60",children:["Send a test email to ",i]})]}),(0,t.jsx)(s.Button,{onClick:_,disabled:x||m,variant:"outline",size:"sm",className:"border-white/20 bg-transparent",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{className:"w-4 h-4 mr-2 text-green-500"}),"Sent!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N,{className:"w-4 h-4 mr-2"}),x?"Sending...":"Send Test"]})})]})})]})}e.s(["EmailPreferences",()=>S],77433)},32497,e=>{"use strict";var t=e.i(91392),r=e.i(66884),s=e.i(21587),i=e.i(74227);let a=(0,i.default)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),n=(0,i.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var o=e.i(21385),l=e.i(77878);function c({userId:e,isPro:i}){let[c,d]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{!async function(){let t=(0,o.createBrowserClient)(),{data:r,error:s}=await t.from("export_history").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(10);s?console.error("[v0] Error fetching exports:",s):d(r||[]),f(!1)}()},[e]),i)?(0,t.jsxs)(s.Card,{className:"glass-card",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(s.CardTitle,{children:"Export History"}),(0,t.jsx)(l.Badge,{variant:"default",className:"bg-primary text-white",children:"PRO"})]})}),(0,t.jsxs)(s.CardContent,{children:[u?(0,t.jsx)("p",{className:"text-white/60 text-sm",children:"Loading export history..."}):0===c.length?(0,t.jsx)("p",{className:"text-white/60 text-sm",children:"No exports yet. Export your portfolio to see history here."}):(0,t.jsx)("div",{className:"space-y-3",children:c.map(e=>{var r;return(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-white/10 last:border-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["csv"===e.export_type?(0,t.jsx)(a,{className:"h-5 w-5 text-green-400"}):(0,t.jsx)(n,{className:"h-5 w-5 text-red-400"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-white text-sm font-medium",children:[e.export_type.toUpperCase()," Export"]}),(0,t.jsx)("p",{className:"text-white/60 text-xs",children:new Date(e.created_at).toLocaleString()})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-white/60 text-xs",children:(r=e.file_size)?r<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:`${(r/1048576).toFixed(1)} MB`:"N/A"})})]},e.id)})}),c.length>0&&(0,t.jsx)("p",{className:"text-white/40 text-xs mt-4",children:"Showing last 10 exports"})]})]}):(0,t.jsxs)(s.Card,{className:"glass-card border-primary/30",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(s.CardTitle,{children:"Export History"}),(0,t.jsx)(l.Badge,{variant:"default",className:"bg-primary text-white",children:"PRO ONLY"})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("p",{className:"text-white/60 text-sm",children:"Track your portfolio exports with KryptoTrac Pro. Upgrade to access export history and advanced PDF reports."})})]})}e.s(["ExportHistory",()=>c],32497)}]);