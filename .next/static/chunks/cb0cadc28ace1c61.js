(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99952,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(74227);let i=(0,a.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),r=(0,a.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),l=(0,a.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var n=e.i(83460),o=e.i(62282),c=e.i(50075);function d({totalValue:e,totalProfitLoss:a,profitLossPercentage:d,topHoldings:m,isPro:x}){let[h,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),j=async()=>{g(!0);try{let t=await fetch("/api/share/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalValue:e,totalProfitLoss:a,profitLossPercentage:d,topHoldings:m.slice(0,3),isPro:x})}),{imageUrl:s}=await t.json();await navigator.clipboard.writeText(`Check out my crypto portfolio on KryptoTrac! ðŸ“ˆ #KryptoTrac

${s}`),p(!0),setTimeout(()=>p(!1),3e3)}catch(e){console.error("[v0] Failed to generate share card:",e)}finally{g(!1)}},y=async()=>{g(!0);try{let t=await fetch("/api/share/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalValue:e,totalProfitLoss:a,profitLossPercentage:d,topHoldings:m.slice(0,3),isPro:x})}),{imageUrl:s}=await t.json(),i=document.createElement("a");i.href=s,i.download="kryptotrac-portfolio.png",document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(e){console.error("[v0] Failed to download share card:",e)}finally{g(!1)}};return(0,t.jsxs)(c.Dialog,{children:[(0,t.jsx)(c.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,t.jsx)(i,{className:"h-4 w-4"}),"Share Portfolio"]})}),(0,t.jsxs)(c.DialogContent,{className:"sm:max-w-md bg-black/95 border-red-500/20",children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{className:"text-white",children:"Share Your Portfolio"}),(0,t.jsx)(c.DialogDescription,{className:"text-gray-400",children:"Generate a shareable card showcasing your portfolio performance"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-lg border border-red-500/20 bg-gradient-to-br from-red-950/20 to-black p-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMCwwLDAuMSkiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-20"}),(0,t.jsxs)("div",{className:"relative space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-3xl font-bold text-white",children:["$",e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsxs)("p",{className:`text-sm font-medium ${a>=0?"text-emerald-400":"text-red-400"}`,children:[a>=0?"+":"","$",Math.abs(a).toLocaleString("en-US",{minimumFractionDigits:2}),"(",a>=0?"+":"",d.toFixed(2),"%)"]})]}),x&&(0,t.jsx)("span",{className:"rounded-full bg-gradient-to-r from-red-500 to-orange-500 px-3 py-1 text-xs font-bold text-white",children:"PRO"})]}),(0,t.jsx)("div",{className:"space-y-2",children:m.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:e.symbol.toUpperCase()}),(0,t.jsxs)("span",{className:e.profitLoss>=0?"text-emerald-400":"text-red-400",children:[e.profitLoss>=0?"+":"","$",Math.abs(e.profitLoss).toLocaleString("en-US",{minimumFractionDigits:2})]})]},e.coinId))}),(0,t.jsx)("div",{className:"pt-4 border-t border-red-500/20",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["Powered by KryptoTrac ",x?"Pro":""]})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Button,{onClick:j,disabled:u,className:"flex-1 bg-red-600 hover:bg-red-700",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Check,{className:"mr-2 h-4 w-4"}),"Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"mr-2 h-4 w-4"}),"Copy Link"]})}),(0,t.jsxs)(o.Button,{onClick:y,disabled:u,variant:"outline",className:"flex-1 bg-transparent",children:[(0,t.jsx)(r,{className:"mr-2 h-4 w-4"}),"Download"]})]})]})]})]})}e.s(["PortfolioShareCard",()=>d],99952)},70905,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(21385),i=e.i(63549),r=e.i(23702);let l=(0,e.i(74227).default)("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var n=e.i(50676),o=e.i(92781),c=e.i(62282),d=e.i(50075),m=e.i(54820);function x({rows:e=5}){return(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:e}).map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-white/5 animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-1/3 bg-white/5 animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-3 w-1/4 bg-white/5 animate-pulse rounded"})]}),(0,t.jsx)("div",{className:"h-6 w-24 bg-white/5 animate-pulse rounded"})]},s))})}var h=e.i(63614);function p(){let[e,p]=(0,s.useState)([]),[u,g]=(0,s.useState)([]),[j,y]=(0,s.useState)(""),[f,b]=(0,s.useState)([]),[N,w]=(0,s.useState)(!0),[v,k]=(0,s.useState)(null),[C,S]=(0,s.useState)(!1),_=(0,a.createBrowserClient)();async function F(){let{data:e}=await _.auth.getUser();k(e.user)}async function T(){let{data:e}=await _.from("user_watchlists").select("coin_id").eq("user_id",v.id);e&&p(e.map(e=>e.coin_id))}async function D(){try{let t=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${e.join(",")}&sparkline=true`),s=await t.json();g(s)}catch(e){console.error("Failed to load coins:",e)}finally{w(!1)}}async function P(e){if(!e)return void b([]);try{let t=await fetch(`https://api.coingecko.com/api/v3/search?query=${e}`),s=await t.json();b(s.coins.slice(0,5))}catch(e){console.error("Search failed:",e)}}async function I(t){if(e.includes(t))return;h.haptics.success();let s=[...e,t];if(p(s),v){let{error:s}=await _.from("user_watchlists").upsert({user_id:v.id,coin_id:t},{onConflict:"user_id,coin_id",ignoreDuplicates:!0});s&&(console.error("[v0] Error adding to watchlist:",s),h.haptics.error(),p(e))}else localStorage.setItem("watchlist",JSON.stringify(s));S(!1),y(""),b([])}async function H(t){h.haptics.light();let s=e.filter(e=>e!==t);p(s),v?await _.from("user_watchlists").delete().eq("user_id",v.id).eq("coin_id",t):localStorage.setItem("watchlist",JSON.stringify(s))}return(0,s.useEffect)(()=>{F()},[]),(0,s.useEffect)(()=>{let e;v?T():(e=localStorage.getItem("watchlist"))?p(JSON.parse(e)):p(["bitcoin","ethereum","solana"])},[v]),(0,s.useEffect)(()=>{if(e.length>0){D();let e=setInterval(D,3e4);return()=>clearInterval(e)}w(!1)},[e]),N?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(r.Star,{className:"w-6 h-6 text-red-500"}),"My Watchlist"]})}),(0,t.jsx)(x,{rows:4})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(r.Star,{className:"w-6 h-6 text-red-500"}),"My Watchlist"]}),(0,t.jsxs)(d.Dialog,{open:C,onOpenChange:S,children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Add Coin"]})}),(0,t.jsxs)(d.DialogContent,{className:"bg-black/95 border-red-900/30 backdrop-blur-xl",children:[(0,t.jsx)(d.DialogHeader,{children:(0,t.jsx)(d.DialogTitle,{className:"text-white",children:"Add to Watchlist"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m.Input,{placeholder:"Search cryptocurrencies...",value:j,onChange:e=>{y(e.target.value),P(e.target.value)},className:"bg-white/5 border-white/10 text-white"}),(0,t.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map(s=>(0,t.jsxs)("button",{onClick:()=>I(s.id),disabled:e.includes(s.id),className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,t.jsx)("img",{src:s.image||"/placeholder.svg",alt:s.name,className:"w-8 h-8"}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"text-white font-medium",children:s.name}),(0,t.jsx)("div",{className:"text-white/60 text-sm uppercase",children:s.symbol})]}),e.includes(s.id)&&(0,t.jsx)("span",{className:"text-green-500 text-sm",children:"Added"})]},s.id))})]})]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(e=>(0,t.jsxs)("div",{className:"group relative p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:border-red-500/50 transition-all duration-300 hover:shadow-[0_0_30px_rgba(239,68,68,0.3)]",children:[(0,t.jsx)("button",{onClick:()=>H(e.id),className:"absolute top-2 right-2 p-1 rounded-lg bg-black/50 hover:bg-red-600/20 opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(l,{className:"w-4 h-4 text-red-500"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-10 h-10"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-bold",children:e.name}),(0,t.jsx)("div",{className:"text-white/60 text-sm uppercase",children:e.symbol})]})]}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-white mb-2",children:["$",e.current_price.toLocaleString()]}),(0,t.jsxs)("div",{className:`flex items-center gap-1 text-sm font-medium ${e.price_change_percentage_24h>=0?"text-green-500":"text-red-500"}`,children:[e.price_change_percentage_24h>=0?(0,t.jsx)(n.TrendingUp,{className:"w-4 h-4"}):(0,t.jsx)(o.TrendingDown,{className:"w-4 h-4"}),Math.abs(e.price_change_percentage_24h).toFixed(2),"%"]}),e.sparkline_in_7d&&(0,t.jsx)("svg",{className:"w-full h-12 mt-3",viewBox:"0 0 164 48",preserveAspectRatio:"none",children:(0,t.jsx)("polyline",{points:e.sparkline_in_7d.price.map((t,s)=>{let a=s/(e.sparkline_in_7d.price.length-1)*164,i=Math.min(...e.sparkline_in_7d.price),r=Math.max(...e.sparkline_in_7d.price);return`${a},${48-(t-i)/(r-i)*48}`}).join(" "),fill:"none",stroke:e.price_change_percentage_24h>=0?"#10b981":"#ef4444",strokeWidth:"2",className:"transition-all duration-300"})})]},e.id))}),0===u.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-white/60",children:[(0,t.jsx)(r.Star,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No coins in your watchlist yet."}),(0,t.jsx)("p",{className:"text-sm mt-2",children:'Click "Add Coin" to get started!'})]})]})}e.s(["WatchlistSection",()=>p],70905)},36276,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(21385),i=e.i(63549),r=e.i(18007),l=e.i(50676),n=e.i(92781),o=e.i(62282),c=e.i(50075),d=e.i(54820),m=e.i(58308);function x(){let[e,x]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[u,g]=(0,s.useState)(!1),[j,y]=(0,s.useState)(""),[f,b]=(0,s.useState)([]),[N,w]=(0,s.useState)(null),[v,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(""),[_,F]=(0,s.useState)(""),[T,D]=(0,s.useState)(null),P=(0,a.createBrowserClient)();async function I(){let{data:e}=await P.auth.getUser();D(e.user)}async function H(){let{data:e}=await P.from("user_portfolios").select("*").eq("user_id",T.id);e&&x(await Promise.all(e.map(async e=>{try{let t=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${e.coin_id}&vs_currencies=usd`),s=await t.json();return{...e,current_price:s[e.coin_id]?.usd||0}}catch(t){return{...e,current_price:0}}}))),p(!1)}async function A(e){if(!e)return void b([]);try{let t=await fetch(`https://api.coingecko.com/api/v3/search?query=${e}`),s=await t.json();b(s.coins.slice(0,5))}catch(e){console.error("Search failed:",e)}}async function B(){if(!N||!v||!C)return;let{error:e}=await P.from("user_portfolios").insert({user_id:T.id,coin_id:N.id,coin_name:N.name,coin_symbol:N.symbol,coin_image:N.large,quantity:parseFloat(v),purchase_price:parseFloat(C),purchase_date:_||new Date().toISOString()});e||(H(),g(!1),w(null),k(""),S(""),F(""),y(""),b([]))}async function E(e){await P.from("user_portfolios").delete().eq("id",e),H()}(0,s.useEffect)(()=>{I()},[]),(0,s.useEffect)(()=>{if(T){H();let e=setInterval(H,3e4);return()=>clearInterval(e)}},[T]);let L=e.reduce((e,t)=>e+(t.current_price||0)*t.quantity,0),M=e.reduce((e,t)=>e+t.purchase_price*t.quantity,0),q=L-M,$=M>0?q/M*100:0;return T?h?(0,t.jsx)("div",{className:"text-white/60",children:"Loading portfolio..."}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Portfolio"}),(0,t.jsxs)(c.Dialog,{open:u,onOpenChange:g,children:[(0,t.jsx)(c.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{className:"bg-red-600 hover:bg-red-700",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Add Holding"]})}),(0,t.jsxs)(c.DialogContent,{className:"bg-black/95 border-red-900/30 backdrop-blur-xl",children:[(0,t.jsx)(c.DialogHeader,{children:(0,t.jsx)(c.DialogTitle,{className:"text-white",children:"Add Holding"})}),(0,t.jsx)("div",{className:"space-y-4",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[(0,t.jsx)("img",{src:N.large||"/placeholder.svg",alt:N.name,className:"w-10 h-10"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-medium",children:N.name}),(0,t.jsx)("div",{className:"text-white/60 text-sm",children:N.symbol.toUpperCase()})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{htmlFor:"quantity",className:"text-white",children:"Quantity"}),(0,t.jsx)(d.Input,{id:"quantity",type:"number",step:"any",placeholder:"0.0",value:v,onChange:e=>k(e.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{htmlFor:"price",className:"text-white",children:"Purchase Price (USD)"}),(0,t.jsx)(d.Input,{id:"price",type:"number",step:"any",placeholder:"0.0",value:C,onChange:e=>S(e.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{htmlFor:"date",className:"text-white",children:"Purchase Date (Optional)"}),(0,t.jsx)(d.Input,{id:"date",type:"date",value:_,onChange:e=>F(e.target.value),className:"bg-white/5 border-white/10 text-white"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Button,{onClick:()=>w(null),variant:"outline",className:"flex-1",children:"Back"}),(0,t.jsx)(o.Button,{onClick:B,className:"flex-1 bg-red-600 hover:bg-red-700",children:"Add Holding"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Input,{placeholder:"Search cryptocurrencies...",value:j,onChange:e=>{y(e.target.value),A(e.target.value)},className:"bg-white/5 border-white/10 text-white"}),(0,t.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map(e=>(0,t.jsxs)("button",{onClick:()=>w(e),className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center gap-3 transition-all",children:[(0,t.jsx)("img",{src:e.large||"/placeholder.svg",alt:e.name,className:"w-8 h-8"}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-white/60 text-sm uppercase",children:e.symbol})]})]},e.id))})]})})]})]})]}),e.length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,t.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Value"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-white",children:["$",L.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,t.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Cost"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-white",children:["$",M.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,t.jsx)("div",{className:"text-white/60 text-sm mb-1",children:"Total Gain/Loss"}),(0,t.jsxs)("div",{className:`text-2xl font-bold ${q>=0?"text-green-500":"text-red-500"}`,children:[q>=0?"+":"","$",q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),(0,t.jsxs)("span",{className:"text-base ml-2",children:["(",$>=0?"+":"",$.toFixed(2),"%)"]})]})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>{let s=(e.current_price||0)*e.quantity,a=e.purchase_price*e.quantity,i=s-a,o=a>0?i/a*100:0;return(0,t.jsx)("div",{className:"group p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:border-red-500/50 transition-all duration-300",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)("img",{src:e.coin_image||"/placeholder.svg",alt:e.coin_name,className:"w-10 h-10"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-bold",children:e.coin_name}),(0,t.jsxs)("div",{className:"text-white/60 text-sm",children:[e.quantity," ",e.coin_symbol.toUpperCase()," @ $",e.purchase_price.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-white font-bold text-lg",children:["$",s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsxs)("div",{className:`text-sm font-medium flex items-center gap-1 ${i>=0?"text-green-500":"text-red-500"}`,children:[i>=0?(0,t.jsx)(l.TrendingUp,{className:"w-4 h-4"}):(0,t.jsx)(n.TrendingDown,{className:"w-4 h-4"}),i>=0?"+":"","$",Math.abs(i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," (",o>=0?"+":"",o.toFixed(2),"%)"]})]})]}),(0,t.jsx)("button",{onClick:()=>E(e.id),className:"ml-4 p-2 rounded-lg bg-black/50 hover:bg-red-600/20 opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(r.Trash2,{className:"w-4 h-4 text-red-500"})})]})},e.id)})}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-white/60",children:[(0,t.jsx)("p",{children:"No holdings in your portfolio yet."}),(0,t.jsx)("p",{className:"text-sm mt-2",children:'Click "Add Holding" to track your investments!'})]})]}):null}e.s(["PortfolioSection",()=>x])},73539,e=>{"use strict";var t=e.i(91392),s=e.i(74227);let a=(0,s.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var i=e.i(50676),r=e.i(49576);let l=(0,s.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var n=e.i(62282),o=e.i(35461);function c({user:e}){let s=[{icon:l,title:"Build Your Watchlist",description:"Add cryptocurrencies you want to track",action:"Browse Coins",href:"/"},{icon:i.TrendingUp,title:"Track Your Portfolio",description:"Record your holdings and see real-time performance",action:"Add Holdings",href:"/dashboard"},{icon:r.Bell,title:"Set Price Alerts",description:"Get notified when prices hit your targets",action:"Create Alert",href:"/alerts"}];return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:(0,t.jsx)(a,{className:"h-8 w-8 text-primary"})}),(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Welcome to KryptoTrac!"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Let's get you set up in 3 simple steps"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:s.map((e,s)=>(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-200",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-4",children:(0,t.jsx)(e.icon,{className:"h-6 w-6 text-primary"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),(0,t.jsx)(n.Button,{asChild:!0,className:"w-full",children:(0,t.jsx)(o.default,{href:e.href,children:e.action})})]},s))}),(0,t.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Need help getting started?"," ",(0,t.jsx)(o.default,{href:"/docs",className:"text-primary hover:underline",children:"Check out our guide"})]})})]})})}e.s(["EmptyDashboard",()=>c],73539)},37127,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(21385);let i=(0,e.i(74227).default)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var r=e.i(21587);function l(){let[e,l]=(0,s.useState)(0),[n,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{!async function(){let e=(0,a.createBrowserClient)(),{data:{user:t}}=await e.auth.getUser();if(!t)return o(!1);let{data:s}=await e.from("profiles").select("streak_count, last_active_date").eq("user_id",t.id).single();if(s){let a=new Date().toISOString().split("T")[0],i=s.last_active_date;if(i===a)l(s.streak_count||0);else{let r=new Date;if(r.setDate(r.getDate()-1),i===r.toISOString().split("T")[0]){let i=(s.streak_count||0)+1;l(i),await e.from("profiles").update({streak_count:i,last_active_date:a}).eq("user_id",t.id)}else l(1),await e.from("profiles").update({streak_count:1,last_active_date:a}).eq("user_id",t.id)}}o(!1)}()},[]),n||0===e)?null:(0,t.jsxs)(r.Card,{className:"border-orange-500/20 bg-gradient-to-br from-orange-950/20 to-black p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-orange-500 to-red-500",children:(0,t.jsx)(i,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Daily Streak"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-white",children:[e," ",1===e?"day":"days"]})]})]}),e>=7&&(0,t.jsx)("div",{className:"mt-3 rounded-md bg-orange-500/10 border border-orange-500/20 px-3 py-2 text-xs text-orange-300",children:"ðŸ”¥ On fire! Keep it up to unlock rewards"})]})}e.s(["StreakTracker",()=>l],37127)},45018,e=>{"use strict";var t=e.i(91392);let s=(0,e.i(74227).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var a=e.i(21587),i=e.i(62282);function r(){return(0,t.jsx)(a.Card,{className:"border-border/40 bg-background/50 p-6 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Recommended Exchanges"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trusted platforms to buy and trade crypto"})]}),(0,t.jsx)("div",{className:"space-y-3",children:[{name:"Kraken",description:"Top-rated Canadian exchange with low fees",badge:"Popular",logo:"https://cryptologos.cc/logos/kraken-kraken-logo.png",link:"#"},{name:"Coinbase",description:"Get $10 in Bitcoin on your first $100 trade",badge:"New User Bonus",logo:"https://cryptologos.cc/logos/coinbase-coin-logo.png",link:"#"},{name:"Binance",description:"World's largest crypto exchange",badge:"Global",logo:"https://cryptologos.cc/logos/binance-coin-bnb-logo.png",link:"#"}].map(e=>(0,t.jsxs)("div",{className:"group flex items-center justify-between rounded-lg border border-border/40 bg-background/50 p-4 transition-all hover:border-primary/50 hover:bg-background/80",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("img",{src:e.logo||"/placeholder.svg",alt:`${e.name} logo`,className:"h-10 w-10 rounded-full object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:e.badge})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),(0,t.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",className:"gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:["Visit",(0,t.jsx)(s,{className:"h-3.5 w-3.5"})]})})]},e.name))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center pt-2 border-t border-border/40",children:"We may earn a commission from partner links. Always do your own research."})]})})}e.s(["RecommendedExchanges",()=>r],45018)},87869,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(56929),i=e.i(50872),r=e.i(71497),l=e.i(63614);let n=[{message:"Yo! I'm BB, your crypto buddy. ðŸ",haptic:[30,20,30],delay:0},{message:"I speak YOUR language - literally. Over 100 languages. Try me in any language you want.",haptic:[30,20,30],delay:2e3},{message:"I watch the markets 24/7 and sometimes I'll pop up with tips when I notice something important. ðŸ‘€",haptic:[50,30,100],delay:4e3},{message:"Ask me anything about crypto. I got you. ðŸ",haptic:[30,20,30],delay:6e3}];function o({onComplete:e}){let[o,c]=(0,s.useState)(0),[d,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(o>=n.length)return void setTimeout(()=>{m(!1),setTimeout(e,500)},2e3);let t=n[o],s=setTimeout(()=>{(0,l.triggerHaptic)(...t.haptic),c(o+1)},t.delay+2e3*(0!==o));return()=>clearTimeout(s)},[o,e]),d)?(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,t.jsxs)(a.motion.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"relative w-full max-w-md glass-card p-8 space-y-6",children:[(0,t.jsx)("button",{onClick:()=>{m(!1),e()},className:"absolute top-4 right-4 text-white/40 hover:text-white transition-colors",children:(0,t.jsx)(r.X,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(a.motion.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:2},className:"text-6xl mb-4",children:"ðŸ"})}),(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:n.slice(0,o+1).map((e,s)=>(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"text-center",children:(0,t.jsx)("p",{className:"text-white text-lg leading-relaxed",children:e.message})},s))}),o>=n.length&&(0,t.jsx)(a.motion.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>{m(!1),e()},className:"w-full py-3 bg-gradient-to-r from-orange-500 to-red-600 rounded-lg font-medium text-white shadow-lg hover:shadow-xl transition-all",children:"Let's Go!"})]})}):null}var c=e.i(21385);function d(){let e=async()=>{let e=(0,c.createBrowserClient)(),{data:{user:t}}=await e.auth.getUser();t&&await e.from("profiles").update({onboarding_completed:!0}).eq("id",t.id)};return(0,t.jsx)(o,{onComplete:e})}e.s(["BBWelcomeWrapper",()=>d],87869)},75403,e=>{"use strict";var t=e.i(91392),s=e.i(66884),a=e.i(35862),i=e.i(91716),r=e.i(71486),l=e.i(50676);let n=(0,e.i(74227).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var o=e.i(21587),c=e.i(77878),d=e.i(62282);function m({name:e,data:s}){let a,i;return(0,t.jsxs)(o.Card,{className:"bg-gray-800/50 border-gray-700/50",children:[(0,t.jsx)(o.CardHeader,{className:"pb-3",children:(0,t.jsxs)(o.CardTitle,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(l.TrendingUp,{className:"w-4 h-4 text-red-500"}),e]})}),(0,t.jsxs)(o.CardContent,{className:"space-y-2",children:["Aave"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Collateral:"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(s.totalCollateralETH).toFixed(4)," ETH"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Debt:"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(s.totalDebtETH).toFixed(4)," ETH"]})]}),(a=parseFloat(s.healthFactor),(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Health Factor:"}),(0,t.jsx)("span",{className:`font-medium ${a>2?"text-green-500":a>1.5?"text-yellow-500":"text-red-500"}`,children:a.toFixed(2)})]}))]}),"Uniswap V3"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Active Positions:"}),(0,t.jsx)("span",{className:"text-white font-medium",children:s.totalPositions})]}),s.positions&&s.positions.length>0&&(0,t.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:s.positions.slice(0,2).map((e,s)=>(0,t.jsxs)("div",{className:"truncate",children:["Pool #",e.tokenId.slice(0,6),"..."]},s))})]}),"Compound"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Supplied:"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:["$",parseFloat(s.supplied).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Borrowed:"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:["$",parseFloat(s.borrowed).toFixed(2)]})]}),(i=parseFloat(s.netPosition),(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Net Position:"}),(0,t.jsxs)("span",{className:`font-medium ${i>=0?"text-green-500":"text-red-500"}`,children:["$",Math.abs(i).toFixed(2)]})]}))]}),"Lido"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Staked ETH:"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:[parseFloat(s.stETH).toFixed(4)," stETH"]})]}),(0,t.jsx)(c.Badge,{variant:"secondary",className:"text-xs mt-2",children:s.type})]}),"Curve"===e&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:s.note||"No active positions"})]})]})}function x(){let e=(0,a.useRouter)(),[c,x]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[u,g]=(0,s.useState)("");(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await fetch("/api/defi/positions"),t=await e.json();t.error?g(t.error):x(t.positions||[])}catch(e){g("Failed to load DeFi positions")}finally{p(!1)}};return h?(0,t.jsx)(o.Card,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700/50",children:(0,t.jsx)(o.CardContent,{className:"flex items-center justify-center p-12",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-red-500"})})}):u?(0,t.jsx)(o.Card,{className:"bg-red-900/20 border-red-500/30",children:(0,t.jsx)(o.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(n,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-red-400 font-medium mb-1",children:"Error Loading Positions"}),(0,t.jsx)("p",{className:"text-red-400/80 text-sm",children:u})]})]})})}):(0,t.jsxs)(o.Card,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700/50",children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-red-600/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)(l.TrendingUp,{className:"w-6 h-6 text-red-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.CardTitle,{className:"text-xl font-bold text-white",children:"DeFi Positions"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-0.5",children:["Tracked across ",c?.length||0," wallet",c?.length!==1?"s":""]})]})]}),(0,t.jsx)(d.Button,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>e.push("/settings/wallets"),children:"Add Wallet"})]})}),(0,t.jsx)(o.CardContent,{className:"space-y-6",children:0===c.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(r.Wallet,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No Wallets Configured"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Add an Ethereum wallet address to start tracking your DeFi positions"}),(0,t.jsx)(d.Button,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>e.push("/settings/wallets"),children:"Add Your First Wallet"})]}):c.map((e,s)=>{let a,i,l,n,o;return(0,t.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-5 border border-gray-700/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-5 pb-3 border-b border-gray-700/50",children:[(0,t.jsx)(r.Wallet,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:e.label||`Wallet ${s+1}`}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 font-mono",children:[e.wallet.slice(0,6),"...",e.wallet.slice(-4)]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.protocols.aave&&null!=e.protocols.aave.totalCollateralETH&&parseFloat(e.protocols.aave.totalCollateralETH)>0&&(0,t.jsx)(m,{name:"Aave",data:e.protocols.aave}),e.protocols.uniswap&&null!=e.protocols.uniswap.totalPositions&&e.protocols.uniswap.totalPositions>0&&(0,t.jsx)(m,{name:"Uniswap V3",data:e.protocols.uniswap}),e.protocols.compound&&null!=e.protocols.compound.supplied&&parseFloat(e.protocols.compound.supplied)>0&&(0,t.jsx)(m,{name:"Compound",data:e.protocols.compound}),e.protocols.lido&&null!=e.protocols.lido.stETH&&parseFloat(e.protocols.lido.stETH)>0&&(0,t.jsx)(m,{name:"Lido",data:e.protocols.lido}),e.protocols.curve&&e.protocols.curve.positions&&e.protocols.curve.positions.length>0&&(0,t.jsx)(m,{name:"Curve",data:e.protocols.curve})]}),(a=e.protocols.aave?.totalCollateralETH!=null&&parseFloat(e.protocols.aave.totalCollateralETH)>0,i=e.protocols.uniswap?.totalPositions!=null&&e.protocols.uniswap.totalPositions>0,l=e.protocols.compound?.supplied!=null&&parseFloat(e.protocols.compound.supplied)>0,n=e.protocols.lido?.stETH!=null&&parseFloat(e.protocols.lido.stETH)>0,o=e.protocols.curve?.positions&&e.protocols.curve.positions.length>0,a||i||l||n||o?null:(0,t.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No active DeFi positions found for this wallet"}))]},s)})})]})}e.s(["DeFiPositions",()=>x],75403)}]);